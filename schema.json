{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/stefanwiest/hct-spec/schema.json",
  "title": "HCT Signal Schema",
  "description": "JSON Schema for HCT coordination signals",
  "type": "object",
  "properties": {
    "hct_signal": {
      "type": "object",
      "required": [
        "type",
        "source"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "cue",
            "fermata",
            "attacca",
            "vamp",
            "caesura",
            "tacet",
            "downbeat"
          ],
          "description": "Signal type"
        },
        "source": {
          "type": "string",
          "description": "Source agent ID"
        },
        "targets": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Target agent IDs"
        },
        "performance": {
          "type": "object",
          "properties": {
            "tempo": {
              "type": "string",
              "enum": [
                "largo",
                "andante",
                "moderato",
                "allegro",
                "presto"
              ],
              "default": "moderato"
            },
            "dynamics": {
              "type": "string",
              "enum": [
                "pp",
                "p",
                "mf",
                "f",
                "ff"
              ],
              "default": "mf"
            },
            "urgency": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "default": 5
            },
            "timeout_ms": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "conditions": {
          "type": "object",
          "properties": {
            "hold_type": {
              "type": "string",
              "enum": [
                "human",
                "governance",
                "resource",
                "quality"
              ]
            },
            "quality_threshold": {
              "type": "number",
              "minimum": 0,
              "maximum": 1
            },
            "repeat_until": {
              "type": "string"
            }
          }
        },
        "context": {
          "type": "object",
          "properties": {
            "movement": {
              "type": "string"
            },
            "objectives": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }
        },
        "timestamp": {
          "type": "string",
          "format": "date-time"
        }
      }
    }
  }
}